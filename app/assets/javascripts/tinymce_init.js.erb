$(window).ready(function () {
  $("textarea.tinymce").closest("form").find("input:submit").prop('disabled', true)
  tinyMCE.init({
    selector: 'textarea.tinymce',
    browser_spellcheck: true,
    branding: false,
    menubar: false,
    plugins: [ 'table', 'link', 'lists' ],
    toolbar: 'undo redo | bold italic | bullist numlist | table link unlink | blockquote image',
    content_css: '<%= asset_path 'application.css' %>',
    valid_elements : 'a[href|title],strong,p,em,sup,,br,ul,li,ol,table,tbody,thead,tr,td,th,blockquote',
    setup: function (editor) {
      editor.on('init', function (e) {
        $("textarea.tinymce").closest("form").find("input:submit").prop('disabled', false)
      });
    }
  })
})
